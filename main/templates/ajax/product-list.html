{% load custom_filter %}
{% for product in data %}
<div class="col-lg-4 col-md-6 mb-4 product-box">
	<div class="card shadow">
	  <a href="/product/{{product.slug}}/{{product.id}}"><img src="/media/{{product.productattribute_set.first.image}}" class="card-img-top" alt="{{product.title}}" style="width: 245px; height: 300px;"></a>
	  <div class="card-body" style="width: 245px; height: 125px;">
	    <h5 class="card-text"><a href="/product/{{product.slug}}/{{product.id}}">{{product.title}}</a></h5>
	    <h6>$ {{product.productattribute_set.first.price}}</h6>
	  </div>
	  <div class="card-footer">
	  	<button class="btn btn-sm btn-primary"><i class="fa fa-shopping-cart"></i></button>
	  	<button class="btn btn-sm btn-danger"><i class="fa fa-heart"></i></button>
	  	{% if product.id in avg_reviews %}
                          <span class="avg-rating">{{avg_reviews|get_item:product.id|floatformat:1}}</span> <i class="fa fa-star text-warning"></i>
                          {% else %}
                          <span class="no-rating">No ratings yet</span>
                          {% endif %}
	  	</span>
	  </div>
	</div>
</div>
{% endfor %}
			